!function(){function t(t,i){for(let o=0;o<i.length;o++){let s=i[o];(function(t,i){return Math.hypot(i[0]-t[0],i[1]-t[1])})((n=t).t,(e=s).t)<n.i+e.i&&(t.o=1,s.o=1)}var n,e}function i(t){return(i,n)=>{i.s[n]|=2,i[1][n]={u:t}}}function n(t=1/0){return(i,n)=>{i.s[n]|=4,i[2][n]={h:t,l:0}}}function e(t,e,o){let s=t[5][e],r=t[3][e];(s.m[0]<0||s.m[0]>t._.width)&&(r.p[0]=-r.p[0]),(s.m[1]<0||s.m[1]>t._.height)&&(r.p[1]=-r.p[1]),t[0][e].o&&(t.s[e]&=-9,t[0][e].M=1,i(40)(t,e),n(3)(t,e))}function o(t,i){return(n,e)=>{n.s[e]|=1,n[0][e]={v:e,M:i,o:0,t:[0,0],i:t}}}function s(t,i){return(n,e)=>{n.s[e]|=16,n[4][e]={v:e,i:t,$:i}}}function r(t=0,i=1){return Math.floor(Math.random()*(i-t+1)+t)}function u(t=0,i=1){return Math.random()*(i-t)+t}function h(t,i,n){let e=t[1][i];t[4][i].i+=e.u*n,t[0][i].i+=e.u*n}function c(t,i,n){let e=t[2][i];e.l+=n,e.l>e.h&&t.g(i)}function f(t,i,n){let e=t[5][i],o=t[3][i];e.m[0]+=o.p[0]*o.u*n,e.m[1]+=o.p[1]*o.u*n,e.A=1}function a(t,i,n){t.C.setTransform(...i.s),t.C.fillStyle=n.$,t.C.beginPath(),t.C.arc(0,0,n.i,0,2*Math.PI),t.C.closePath(),t.C.fill()}function l(t){var i,n;t.A&&(t.A=0,n=t.m,(i=t.s)[0]=1,i[1]=0,i[2]=0,i[3]=1,i[4]=n[0],i[5]=n[1])}function m(t,i,n){return{m:[i,n],S:[s(10,`hsla(${r(0,359)}, 90%, 60%, 0.5)`),(e=u(0,2*Math.PI),(t,i)=>{t.s[i]|=8,t[3][i]={p:[Math.cos(e),Math.sin(e)],u:200}}),o(10,0)]};var e}let d=document.getElementById("tick"),w=document.getElementById("fps"),_=new class{constructor(){this.s=[],this[0]=[],this[1]=[],this[2]=[],this[3]=[],this[4]=[],this[5]=[],this.T={mouse_x:0,mouse_y:0},this.InputEvent={mouse_x:0,mouse_y:0,wheel_y:0},this.U=0,document.addEventListener("visibilitychange",()=>document.hidden?this.D():this.I()),this._=document.querySelector("canvas"),this._.width=window.innerWidth,this._.height=window.innerHeight,this._.addEventListener("contextmenu",t=>t.preventDefault()),this._.addEventListener("mousedown",t=>{this.T[`mouse_${t.button}`]=1,this.InputEvent[`mouse_${t.button}_down`]=1}),this._.addEventListener("mouseup",t=>{this.T[`mouse_${t.button}`]=0,this.InputEvent[`mouse_${t.button}_up`]=1}),this._.addEventListener("mousemove",t=>{this.T.mouse_x=t.offsetX,this.T.mouse_y=t.offsetY}),this.C=this._.getContext("2d")}k(t=0){for(let i=0;i<1e4;i++)if(!this.s[i])return this.s[i]=t,i;throw Error("No more entities available.")}F(u){let m=performance.now();(function(t,e){t.InputEvent.mouse_0_up&&t.R({m:[t.T.mouse_x,t.T.mouse_y],S:[s(5,`hsla(${r(0,359)}, 90%, 60%, 0.5)`),o(5,1),i(40),n(3)]})})(this),function(t,i){for(let i=0;i<t.s.length;i++)41==(41&t.s[i])&&e(t,i)}(this),function(t,i){for(let n=0;n<t.s.length;n++)36==(36&t.s[n])&&c(t,n,i)}(this,u),function(t,i){for(let n=0;n<t.s.length;n++)40==(40&t.s[n])&&f(t,n,i)}(this,u),function(t,i){for(let i=0;i<t.s.length;i++)32==(32&t.s[i])&&l(t[5][i])}(this),function(t,i){for(let n=0;n<t.s.length;n++)51==(51&t.s[n])&&h(t,n,i)}(this,u),function(i,n){let e=[],o=[];for(let t=0;t<i.s.length;t++)if(33==(33&i.s[t])){let n=i[5][t],s=i[0][t];switch(s.o=0,s.t[0]=n.m[0],s.t[1]=n.m[1],s.M){case 0:e.push(s);break;case 1:o.push(s)}}for(let i=0;i<o.length;i++)t(o[i],e)}(this),function(t,i){t.C.resetTransform(),t.C.clearRect(0,0,t._.width,t._.height),t.C.fillStyle="#000",t.C.fillRect(0,0,t._.width,t._.height);for(let i=0;i<t.s.length;i++)48==(48&t.s[i])&&a(t,t[5][i],t[4][i])}(this),function(t,i,n){n&&(n.textContent=i.toFixed(1))}(0,performance.now()-m,document.querySelector("#frame")),function(t,i){d&&(d.textContent=(1e3*i).toFixed(1)),w&&(w.textContent=(1/i).toFixed())}(0,u);for(let t in this.InputEvent)this.InputEvent[t]=0}I(){let t=performance.now(),i=n=>{this.F((n-t)/1e3),t=n,this.U=requestAnimationFrame(i)};this.D(),i(t)}D(){cancelAnimationFrame(this.U)}R({m:t,S:i=[]}){let n=this.k();!function(t=[0,0]){return(i,n)=>{i.s[n]|=32,i[5][n]={v:n,s:[1,0,0,1,0,0],m:t,A:1}}}(t)(this,n);for(let t of i)t(this,n);return n}g(t){this.s[t]=0}};!function(t,i){t.s=[];for(let i=0;i<1e3;i++)t.R(m(0,r(1,t._.width-1),r(1,t._.height-1)))}(_),_.I(),window.$=(...t)=>void 0,window.game=_}();
