!function(){function t(t,n){return(i,e)=>{i.t[e]|=1,i[0][e]={i:e,o:n,s:0,u:[0,0],h:t}}}function n(t,n){return(i,e)=>{i.t[e]|=16,i[4][e]={i:e,h:t,l:n}}}function i(t=0,n=1){return Math.floor(Math.random()*(n-t+1)+t)}function e(t=0,n=1){return Math.random()*(n-t)+t}function o(o,s,r){return{m:[s,r],p:[n(10,`hsla(${i(0,359)}, 90%, 60%, 0.5)`),(u=e(0,2*Math.PI),(t,n)=>{t.t[n]|=8,t[3][n]={v:[Math.cos(u),Math.sin(u)],g:200}}),t(10,0)]};var u}function s(t,n){t.t=[];for(let e=0;e<n;e++)t.$(o(0,i(1,t._.width-1),i(1,t._.height-1)))}function r(t,n){for(let o=0;o<n.length;o++){let s=n[o];(function(t,n){return Math.hypot(n[0]-t[0],n[1]-t[1])})((i=t).u,(e=s).u)<i.h+e.h&&(t.s=1,s.s=1)}var i,e}function u(t){return(n,i)=>{n.t[i]|=2,n[1][i]={g:t}}}function a(t=1/0){return(n,i)=>{n.t[i]|=4,n[2][i]={M:t,A:0}}}function h(t,n,i){let e=t[5][n],o=t[3][n];(e.m[0]<0||e.m[0]>t._.width)&&(o.v[0]=-o.v[0]),(e.m[1]<0||e.m[1]>t._.height)&&(o.v[1]=-o.v[1]),t[0][n].s&&(t.t[n]&=-9,t[0][n].o=1,u(40)(t,n),a(3)(t,n))}function c(t,n,i){let e=t[1][n];t[4][n].h+=e.g*i,t[0][n].h+=e.g*i}function f(t,n,i){let e=t[2][n];e.A+=i,e.A>e.M&&t.k(n)}function l(t,n,i){let e=t[5][n],o=t[3][n];e.m[0]+=o.v[0]*o.g*i,e.m[1]+=o.v[1]*o.g*i,e.C=1}function m(t,n,i){t.T.setTransform(...n.t),t.T.fillStyle=i.l,t.T.beginPath(),t.T.arc(0,0,i.h,0,2*Math.PI),t.T.closePath(),t.T.fill()}function d(t){var n,i;t.C&&(t.C=0,i=t.m,(n=t.t)[0]=1,n[1]=0,n[2]=0,n[3]=1,n[4]=i[0],n[5]=i[1])}function p(t,...n){return t.reduce((t,i)=>t+function(t){let n=t.shift();return 0==n||void 0===n?"":Array.isArray(n)?n.join(""):n}(n)+i)}function v(t){switch(t.S){case"title":return p`<div style="margin-top: 10vh; font: 20vmin sans-serif;"><span>Chain</span><br><span>Reaction</span></div><div style="margin-top: 10vh; font: 10vmin sans-serif;"><button style="margin-right: 1vmin" onclick="$(${1}, [10])"><span>Play Now</span></button><button style="margin-right: 1vmin" onclick="$(${1}, [100])"><span>One Hundred<span></button><button style="margin-right: 1vmin" onclick="$(${1}, [1000])"><span>One Thousand</span></button></div>`;default:return""}}let y,w=document.getElementById("tick"),g=document.getElementById("fps"),$=new class{constructor(){this.t=[],this[0]=[],this[1]=[],this[2]=[],this[3]=[],this[4]=[],this[5]=[],this.S="title",this.U={mouse_x:0,mouse_y:0},this.InputEvent={mouse_x:0,mouse_y:0,wheel_y:0},this.D=0,document.addEventListener("visibilitychange",()=>document.hidden?this.F():this.I()),this._=document.querySelector("canvas"),this._.width=window.innerWidth,this._.height=window.innerHeight,this.R=document.querySelector("main"),this.R.addEventListener("contextmenu",t=>t.preventDefault()),this.R.addEventListener("mousedown",t=>{this.U[`mouse_${t.button}`]=1,this.InputEvent[`mouse_${t.button}_down`]=1}),this.R.addEventListener("mouseup",t=>{this.U[`mouse_${t.button}`]=0,this.InputEvent[`mouse_${t.button}_up`]=1}),this.R.addEventListener("mousemove",t=>{this.U.mouse_x=t.offsetX,this.U.mouse_y=t.offsetY}),this.T=this._.getContext("2d")}q(t=0){for(let n=0;n<1e4;n++)if(!this.t[n])return this.t[n]=t,n;throw Error("No more entities available.")}N(e){let o=performance.now();(function(e,o){"play"===e.S&&e.InputEvent.mouse_0_up&&e.$({m:[e.U.mouse_x,e.U.mouse_y],p:[n(5,`hsla(${i(0,359)}, 90%, 60%, 0.5)`),t(5,1),u(40),a(3)]})})(this),function(t,n){for(let n=0;n<t.t.length;n++)41==(41&t.t[n])&&h(t,n)}(this),function(t,n){for(let i=0;i<t.t.length;i++)36==(36&t.t[i])&&f(t,i,n)}(this,e),function(t,n){for(let i=0;i<t.t.length;i++)40==(40&t.t[i])&&l(t,i,n)}(this,e),function(t,n){for(let n=0;n<t.t.length;n++)32==(32&t.t[n])&&d(t[5][n])}(this),function(t,n){for(let i=0;i<t.t.length;i++)51==(51&t.t[i])&&c(t,i,n)}(this,e),function(t,n){let i=[],e=[];for(let n=0;n<t.t.length;n++)if(33==(33&t.t[n])){let o=t[5][n],s=t[0][n];switch(s.s=0,s.u[0]=o.m[0],s.u[1]=o.m[1],s.o){case 0:i.push(s);break;case 1:e.push(s)}}for(let t=0;t<e.length;t++)r(e[t],i)}(this),function(t,n){t.T.resetTransform(),t.T.clearRect(0,0,t._.width,t._.height),t.T.fillStyle="#000",t.T.fillRect(0,0,t._.width,t._.height);for(let n=0;n<t.t.length;n++)48==(48&t.t[n])&&m(t,t[5][n],t[4][n])}(this),function(t,n){let i=v(t);i!==y&&(t.R.innerHTML=y=i)}(this),function(t,n,i){i&&(i.textContent=n.toFixed(1))}(0,performance.now()-o,document.querySelector("#frame")),function(t,n){w&&(w.textContent=(1e3*n).toFixed(1)),g&&(g.textContent=(1/n).toFixed())}(0,e);for(let t in this.InputEvent)this.InputEvent[t]=0}I(){let t=performance.now(),n=i=>{this.N((i-t)/1e3),t=i,this.D=requestAnimationFrame(n)};this.F(),n(t)}F(){cancelAnimationFrame(this.D)}$({m:t,p:n=[]}){let i=this.q();!function(t=[0,0]){return(n,i)=>{n.t[i]|=32,n[5][i]={i,t:[1,0,0,1,0,0],m:t,C:1}}}(t)(this,i);for(let t of n)t(this,i);return i}k(t){this.t[t]=0}};s($,10),$.I(),window.$=(...t)=>(function(t,n,i){switch(n){case 1:t.S="play";let n=i[0];requestAnimationFrame(()=>s(t,n))}})($,...t),window.game=$}();
